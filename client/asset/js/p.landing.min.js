var mapName = 'landing-map'

function getRandom_marker(bounds) {
  var lat_min = bounds.getSouthWest().lat(),
      lat_range = bounds.getNorthEast().lat() - lat_min,
      lng_min = bounds.getSouthWest().lng(),
      lng_range = bounds.getNorthEast().lng() - lng_min

  return new google.maps.LatLng(lat_min + (Math.random() * lat_range), lng_min + (Math.random() * lng_range))
}

function initLanding(){
  mapincGoogleMap[mapName].setOptions({
    zoomControl: false
  })

  google.maps.event.addListener(mapincGoogleMap[mapName], 'tilesloaded', function(){
    var mapBounds = mapincGoogleMap[mapName].getBounds()
    var markerIcon = []
    markerIcon[0] = 'asset/image/marker-pin-add.png'
    markerIcon[1] = 'asset/image/marker-pin-pass.png'
    markerIcon[2] = 'asset/image/marker-pin-notpass.png'

    for(var i = 0; i < 20; i++){
      setTimeout(function(){
        new google.maps.Marker({
          animation: google.maps.Animation.DROP,
          icon: markerIcon[Math.floor((Math.random()*markerIcon.length))],
          map: mapincGoogleMap[mapName],
          position: getRandom_marker(mapBounds)
        })
      }, 100 * (i+1))
    }
  })
}

$(function(){
  verify(initLanding(), true, 'p.dashboard.html')
})
